                           idigi_send sample application

Overview

This sample demonstrates how to use the idigi connector API's to send files to the iDigi server, 
the iDigi connector API's are located in the file /usr/include/idigi_connector.h on the device.

The iDigi library is located in /usr/lib/libidigi.so and contains the API defined in idigi_connector.h.
The library will connect and stay connected to the iDigi cloud as long as the process which starts
the iDigi connector is alive.

Code Flow

The routine main() calls application_start() which initializes the iDigi Connector by calling
idigi_connector_start(), this will initiate the connection process to the iDigi cloud, if any errors are
encountered they are reported to stdout and will show up in the workbench console window.

Note: If a certificate error is reported, verify that the data and time is set correctly on
the device, use the date command as show below (plug in the correct date/time) to set the time.

date +%Y%m%d -s "20120601"

Next, application_start() then calls API idigi_send(), this initiates the file transfer to the
iDigi cloud.  The data structure idigi_connector_data_t contains the information about the file
which is transfered, including the length and potiner to the data,the flag field can be used to
indicate that the data is to be appended to an existing file, in this case we create a new file.

This sample enters an infinite and the file is update every 60 seconds.


Building
     1. Click on Wind River Workbench icon, this is used to build, debug and launch the idigi sample
        applications.
     2. The sample applications appear on the left hand side of the workbench.
     3. Click on idigi_connect
     4. Right mouse click and select Build Project.

In the Build Console on the lower portion of the screen you can view the build output.

Running

In order to run the sample we use the UserMode connection in the lower left hand corner under Remote Systems.
    1. Click on and highlight UserModeConnection in the lower left hand corner.
    2. Right mouse click on Connect, the bottom toolbar will now say Connected - Target server running
    3. Right mouse click on Download -> Linux Application Process then click OK
    4. Right mouse click again on UserModeConnection and select Run->Linux Application Process then click OK

At this point the device will be running, the output will appear in the console window.


Viewing results from iDigi Device Cloud

To view the results for this sample login to the iDigi Device Cloud as described in the Getting 
Started section.

Once logged in click on storage from within the left navigation panel as shown below. Double click to 
the device folder.

This sample creates a file test.txt in the test directory. Double click on the test folder to open the 
test directory.

The file is then listed as shown (below). You can click on a file to view its contents, you will see the 
file test.txt in the test directory after you run this sample.

Python script to retrieve a file from iDigi Device Cloud storage

This sample provides a simple python script to retrive the test.txt file from 
developer.idigi.com after a device has sent test.txt into the server.

Run the python script in the sample.

python get_file.py <username> <password> <device_id>

The script prints the content of test.txt which was uploaded from the device to iDigi.



